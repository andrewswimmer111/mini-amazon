{% extends "base.html" %}

{% block content %}

<br><br>

<h2>Products for sale:</h2>

<div> Filter for the kth most expensive items </div>
<form method="get" action="{{ url_for('index.index') }}">
  <input 
    type="number" 
    name="top_k" 
    value="{{ k or '' }}" 
    min=0 
    max="{{ n }}" 
    step="1"
  >
  <button type="submit">Apply</button>
  <button type="button" id="reset-btn" data-url="{{ url_for('index.index') }}">
    Reset
  </button>


</form>

<br><br>

<table class='table table-hover table-bordered container'>
  <thead class="thead-dark">
    <tr>
      <th scope="col">Product ID</th>
      <th scope="col">Product Name</th>
      <th scope="col">Product Description</th>
      <th scope="col">Product Category</th>
      <th scope="col">Price</th>
    </tr>
  </thead>
  <tbody>
    {% for product in avail_products%}
      <tr>
        <th scope="row">{{product.id}}</th>
        <td>{{product.name}}</td>
        <td>{{product.description}}</td>
        <td>{{product.category}}</td>
        <td>{{product.price}}</td>
      </tr>
    {% endfor %}
  </tbody>
</table>

<script>
  document.getElementById('reset-btn').addEventListener('click', (e) => {
    window.location.href = e.target.dataset.url;
  });
</script>

{% endblock %}