<head>
  <link rel="stylesheet" href="{{ url_for('static', filename='css/index.css') }}">
</head>

{% extends "base.html" %}

{% block content %}

<div class="ameowzon-layout">

  <!-- LEFT SIDEBAR -->
  <aside class="filter-sidebar">

    <!-- VIEW SELLER INVENTORY -->
    <div class="sidebar-section">
      <h4>View Profiles</h4>

      <form id="seller-form" onsubmit="goToSeller(event)" class="sidebar-form">
        <label for="seller-id">User ID:</label>
        <input
          type="number"
          id="seller-id"
          name="seller_id"
          min="0"
          placeholder="e.g. 0"
          required
        >
        <button class="sidebar-btn" type="submit">View</button>
      </form>
    </div>

    <hr>

    <!-- FILTERS -->
    <div class="sidebar-section">
      <h4>Filters</h4>

      <form method="get" action="{{ url_for('index.index') }}" class="sidebar-form">

        <!-- Category -->
        <label for="category">Category:</label>
        <select id="category" name="category">
          <option value="" {% if not selected_category %}selected{% endif %}>All</option>
          {% for c in categories %}
            <option value="{{ c }}" {% if selected_category == c %}selected{% endif %}>{{ c }}</option>
          {% endfor %}
        </select>

        <!-- Keyword -->
        <label for="keyword">Keyword:</label>
        <input 
          type="text" 
          id="keyword" 
          name="keyword"
          placeholder="Search"
          value="{{ keyword or '' }}"
        >

        <!-- Sorting -->
        <label for="sortBy">Sort by:</label>
        <select id="sortBy" name="sortBy">
          <option value="name" {% if sortBy == 'name' %}selected{% endif %}>Name</option>
          <option value="min_price" {% if sortBy == 'min_price' %}selected{% endif %}>Lowest Price</option>
          <option value="max_price" {% if sortBy == 'max_price' %}selected{% endif %}>Highest Price</option>
        </select>

        <select id="sortDir" name="sortDir">
          <option value="asc" {% if sortDir == 'asc' %}selected{% endif %}>Ascending</option>
          <option value="desc" {% if sortDir == 'desc' %}selected{% endif %}>Descending</option>
        </select>

        <button type="submit" class="sidebar-btn">Apply</button>
        <button type="button" id="reset-btn" class="sidebar-btn" data-url="{{ url_for('index.index') }}">Reset</button>
      </form>
    </div>

  </aside>

  <!-- RIGHT SIDE CONTENT -->
  <main class="product-content">
    <div class="welcome-banner">
        Welcome to Ameowzon, your one-stop shop for all cats!
    </div>


    {% include '_products_fragment.html' %}
  </main>

</div>

<script>
  document.getElementById('reset-btn').addEventListener('click', (e) => {
    window.location.href = e.target.dataset.url;
  });

  function goToSeller(event) {
    event.preventDefault();
    const id = document.getElementById('seller-id').value.trim();
    if (id !== '') {
      window.location.href = `/seller/${id}/inventory/view`;
    }
  }
</script>


{% endblock %}